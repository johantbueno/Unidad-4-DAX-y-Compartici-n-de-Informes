<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unidad 4: DAX y Compartici√≥n de Informes en Power BI - Johan Tapia PhD.</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        :root {
            --primary-blue: #004aad;
            --accent-gold: #ffd166;
            --light-bg: #f8f9fa;
            --dark-text: #212529;
            --success-green: #28a745;
            --error-red: #dc3545;
            --purple: #6f42c1;
            --teal: #20c997;
            --code-bg: #282c34;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            scroll-behavior: smooth;
        }
        
        /* Navbar */
        .navbar {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #0066cc 100%);
            box-shadow: 0 4px 12px rgba(0, 74, 173, 0.15);
            padding: 1rem 0;
            transition: all 0.3s ease;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.3rem;
            color: white !important;
            transition: transform 0.3s ease;
        }
        
        .navbar-brand:hover {
            transform: translateY(-2px);
        }
        
        .navbar-nav .nav-link {
            color: rgba(255, 255, 255, 0.9) !important;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .navbar-nav .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--accent-gold);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .navbar-nav .nav-link:hover::after {
            width: 80%;
        }
        
        .navbar.scrolled {
            padding: 0.5rem 0;
            box-shadow: 0 6px 20px rgba(0, 74, 173, 0.25);
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #0066cc 100%);
            color: white;
            padding: 8rem 0 6rem;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(255,255,255,0.1)" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,144C960,149,1056,139,1152,128C1248,117,1344,107,1392,101.3L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
            opacity: 0.3;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            animation: fadeInUp 0.8s ease;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .hero .subtitle {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }
        
        .hero .author-info {
            font-size: 1.1rem;
            margin-bottom: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }
        
        .linkedin-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            transition: all 0.3s ease;
            text-decoration: none;
            color: white;
        }
        
        .linkedin-badge:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            color: white;
        }
        
        .btn-hero {
            background: var(--accent-gold);
            color: var(--primary-blue);
            border: none;
            padding: 1rem 3rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 209, 102, 0.4);
        }
        
        .btn-hero:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 209, 102, 0.6);
            background: #ffdb7d;
            color: var(--primary-blue);
        }
        
        /* Section Styling */
        section {
            padding: 5rem 0;
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1rem;
            position: relative;
            display: inline-block;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--accent-gold);
            border-radius: 2px;
        }
        
        /* Cards */
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            height: 100%;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0, 74, 173, 0.2);
        }
        
        .card-icon {
            font-size: 3rem;
            color: var(--primary-blue);
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .card:hover .card-icon {
            transform: scale(1.1);
            color: var(--accent-gold);
        }
        
        .card-title {
            color: var(--primary-blue);
            font-weight: 600;
            font-size: 1.4rem;
        }
        
        /* Code Blocks */
        .code-block {
            background: var(--code-bg);
            color: #abb2bf;
            padding: 1.5rem;
            border-radius: 12px;
            overflow-x: auto;
            margin: 1.5rem 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .code-block code {
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .code-header {
            background: #21252b;
            color: #abb2bf;
            padding: 0.5rem 1rem;
            border-radius: 8px 8px 0 0;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .copy-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 0.3rem 0.8rem;
            border-radius: 5px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            background: var(--accent-gold);
            color: var(--primary-blue);
        }
        
        .dax-keyword {
            color: #c678dd;
            font-weight: bold;
        }
        
        .dax-function {
            color: #61afef;
        }
        
        .dax-string {
            color: #98c379;
        }
        
        .dax-number {
            color: #d19a66;
        }
        
        .dax-comment {
            color: #5c6370;
            font-style: italic;
        }
        
        /* DAX Examples Grid */
        .dax-example {
            background: white;
            border-left: 4px solid var(--primary-blue);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .dax-example:hover {
            transform: translateX(5px);
            border-left-color: var(--accent-gold);
        }
        
        .dax-example-title {
            color: var(--primary-blue);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .dax-category-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge-basic {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .badge-intermediate {
            background: #fff3e0;
            color: #f57c00;
        }
        
        .badge-advanced {
            background: #fce4ec;
            color: #c2185b;
        }
        
        /* Sharing Methods */
        .sharing-method {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .sharing-method:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 74, 173, 0.15);
        }
        
        .sharing-icon {
            font-size: 3rem;
            color: var(--primary-blue);
            margin-bottom: 1rem;
        }
        
        .sharing-title {
            color: var(--primary-blue);
            font-weight: 600;
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }
        
        /* Security Features */
        .security-feature {
            display: flex;
            gap: 1rem;
            padding: 1.5rem;
            background: white;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .security-feature:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .security-icon-box {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-blue), #0066cc);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .security-icon-box i {
            font-size: 1.8rem;
            color: white;
        }
        
        /* Interactive Demo */
        .demo-container {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }
        
        .dax-editor {
            background: var(--code-bg);
            color: #abb2bf;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            min-height: 150px;
            margin-bottom: 1rem;
        }
        
        .dax-result {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid var(--success-green);
            margin-top: 1rem;
        }
        
        /* Callouts */
        .callout {
            border-left: 4px solid var(--primary-blue);
            background: #f0f7ff;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .callout-success {
            border-left-color: var(--success-green);
            background: #f0fff4;
        }
        
        .callout-warning {
            border-left-color: #ffc107;
            background: #fffbf0;
        }
        
        .callout-danger {
            border-left-color: var(--error-red);
            background: #fff5f5;
        }
        
        .callout-info {
            border-left-color: var(--teal);
            background: #f0fffe;
        }
        
        .callout-icon {
            font-size: 1.5rem;
            margin-right: 0.5rem;
            vertical-align: middle;
        }
        
        /* Tabs */
        .custom-tabs {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--primary-blue);
            background: white;
            color: var(--primary-blue);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .tab-btn:hover, .tab-btn.active {
            background: var(--primary-blue);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 74, 173, 0.3);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Comparison Table */
        .comparison-table {
            width: 100%;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }
        
        .comparison-table th {
            background: linear-gradient(135deg, var(--primary-blue), #0066cc);
            color: white;
            padding: 1rem;
            font-weight: 600;
        }
        
        .comparison-table td {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .comparison-table tr:hover {
            background: #f8f9fa;
        }
        
        .check-icon {
            color: var(--success-green);
            font-size: 1.2rem;
        }
        
        .times-icon {
            color: var(--error-red);
            font-size: 1.2rem;
        }
        
        /* Quiz Section */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .question-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .question-card.correct {
            border: 3px solid var(--success-green);
            background: #f0fff4;
        }
        
        .question-card.incorrect {
            border: 3px solid var(--error-red);
            background: #fff5f5;
        }
        
        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
        }
        
        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin-bottom: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: var(--primary-blue);
            transform: translateX(5px);
        }
        
        .option.selected {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }
        
        .option.correct {
            background: var(--success-green);
            color: white;
            border-color: var(--success-green);
        }
        
        .option.incorrect {
            background: var(--error-red);
            color: white;
            border-color: var(--error-red);
        }
        
        .option.disabled {
            pointer-events: none;
            opacity: 0.7;
        }
        
        .quiz-score {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #0066cc 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 2rem;
            box-shadow: 0 5px 20px rgba(0, 74, 173, 0.2);
        }
        
        .btn-quiz {
            background: var(--accent-gold);
            color: var(--primary-blue);
            border: none;
            padding: 0.8rem 2rem;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }
        
        .btn-quiz:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 209, 102, 0.4);
            background: #ffdb7d;
        }
        
        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #0066cc 100%);
            color: white;
            padding: 3rem 0 1rem;
        }
        
        footer a {
            color: var(--accent-gold);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        footer a:hover {
            color: #ffdb7d;
            text-decoration: underline;
        }
        
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-blue);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 74, 173, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .back-to-top:hover {
            transform: translateY(-5px);
            background: #0066cc;
        }
        
        .back-to-top.show {
            display: flex;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeInUp 0.6s ease;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero .subtitle {
                font-size: 1.1rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .hero .author-info {
                flex-direction: column;
            }
            
            .custom-tabs {
                justify-content: center;
            }
            
            .code-block {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#home">
                <i class="bi bi-graph-up-arrow me-2"></i>Power BI Academy
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#objetivos">Objetivos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#dax">DAX</a></li>
                    <li class="nav-item"><a class="nav-link" href="#compartir">Compartir</a></li>
                    <li class="nav-item"><a class="nav-link" href="#seguridad">Seguridad</a></li>
                    <li class="nav-item"><a class="nav-link" href="#practica">Pr√°ctica</a></li>
                    <li class="nav-item"><a class="nav-link" href="#autoevaluacion">Quiz</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content text-center">
                <h1 class="display-3 fw-bold">Unidad 4: DAX y Compartici√≥n de Informes</h1>
                <p class="subtitle">Domina las f√≥rmulas DAX y aprende a compartir tus informes de forma segura y efectiva</p>
                <div class="author-info">
                    <span><strong>Instructor:</strong> Johan Tapia PhD.</span>
                    <a href="https://www.linkedin.com/in/johan-tapia-192183281/" target="_blank" class="linkedin-badge">
                        <i class="bi bi-linkedin"></i>
                        Conectar en LinkedIn
                    </a>
                </div>
                <button class="btn btn-hero" onclick="document.getElementById('objetivos').scrollIntoView({behavior: 'smooth'})">
                    <i class="bi bi-code-slash me-2"></i>Comenzar Aprendizaje
                </button>
            </div>
        </div>
    </section>

    <!-- Objetivos -->
    <section id="objetivos" class="bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Objetivos de Aprendizaje</h2>
                <p class="text-muted mt-3">Al completar esta unidad, ser√°s capaz de:</p>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="card p-4">
                        <ul class="list-unstyled">
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <strong>Comprender</strong> qu√© es DAX (Data Analysis Expressions) y su rol en Power BI
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <strong>Crear</strong> medidas calculadas, columnas calculadas y tablas usando f√≥rmulas DAX
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <strong>Aplicar</strong> funciones DAX comunes para an√°lisis de datos (SUM, CALCULATE, FILTER, etc.)
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <strong>Compartir</strong> informes de Power BI mediante m√∫ltiples m√©todos (enlace, publicaci√≥n, workspaces)
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <strong>Configurar</strong> permisos y control de acceso para proteger datos sensibles
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <strong>Implementar</strong> Row-Level Security (RLS) para seguridad a nivel de fila
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- DAX Section -->
    <section id="dax">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">DAX: Data Analysis Expressions</h2>
                <p class="text-muted mt-3">El lenguaje de f√≥rmulas para an√°lisis avanzado en Power BI</p>
            </div>

            <!-- What is DAX -->
            <div class="row mb-5">
                <div class="col-lg-6 mb-4">
                    <div class="card p-4 h-100">
                        <h4 class="text-primary mb-3"><i class="bi bi-info-circle-fill me-2"></i>¬øQu√© es DAX?</h4>
                        <p><strong>DAX (Data Analysis Expressions)</strong> es un lenguaje de f√≥rmulas desarrollado por Microsoft para Power BI, Power Pivot y Analysis Services.</p>
                        <p>Permite crear c√°lculos personalizados desde operaciones simples hasta an√°lisis complejos de inteligencia temporal.</p>
                        <div class="mt-3">
                            <h6 class="text-primary">Caracter√≠sticas principales:</h6>
                            <ul>
                                <li>Sintaxis similar a Excel (pero m√°s potente)</li>
                                <li>Trabaja con tablas y relaciones</li>
                                <li>Contextos de filtro y fila</li>
                                <li>M√°s de 250 funciones incorporadas</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 mb-4">
                    <div class="card p-4 h-100">
                        <h4 class="text-primary mb-3"><i class="bi bi-gear-fill me-2"></i>¬øPara qu√© se usa?</h4>
                        <ul class="mb-0">
                            <li class="mb-2"><strong>Medidas:</strong> C√°lculos din√°micos que responden a filtros (ej: Total Sales, Profit Margin)</li>
                            <li class="mb-2"><strong>Columnas calculadas:</strong> Nuevas columnas basadas en otras columnas de la tabla</li>
                            <li class="mb-2"><strong>Tablas calculadas:</strong> Crear nuevas tablas desde cero o transformando existentes</li>
                            <li class="mb-2"><strong>Time Intelligence:</strong> An√°lisis comparativos (YTD, MTD, Year-over-Year)</li>
                            <li class="mb-2"><strong>KPIs complejos:</strong> M√©tricas empresariales personalizadas</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- DAX Basics -->
            <div class="mb-5">
                <h3 class="text-primary mb-4">Fundamentos de DAX</h3>
                
                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <div class="dax-example">
                            <div class="dax-example-title">
                                <i class="bi bi-1-circle-fill"></i>
                                Medidas (Measures)
                                <span class="dax-category-badge badge-basic">B√°sico</span>
                            </div>
                            <p>C√°lculos que se eval√∫an din√°micamente seg√∫n el contexto de filtro.</p>
                            <div class="code-header">
                                <span>DAX</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                            </div>
                            <div class="code-block">
<code><span class="dax-comment">// Total de ventas</span>
<span class="dax-keyword">Total Sales</span> = <span class="dax-function">SUM</span>(Orders[Sales])

<span class="dax-comment">// Margen de beneficio</span>
<span class="dax-keyword">Profit Margin</span> = <span class="dax-function">DIVIDE</span>(
    <span class="dax-function">SUM</span>(Orders[Profit]),
    <span class="dax-function">SUM</span>(Orders[Sales])
)</code>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="dax-example">
                            <div class="dax-example-title">
                                <i class="bi bi-2-circle-fill"></i>
                                Columnas Calculadas
                                <span class="dax-category-badge badge-basic">B√°sico</span>
                            </div>
                            <p>Se calculan una vez y se almacenan en la tabla. Se eval√∫an fila por fila.</p>
                            <div class="code-header">
                                <span>DAX</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                            </div>
                            <div class="code-block">
<code><span class="dax-comment">// Precio unitario</span>
<span class="dax-keyword">Unit Price</span> = 
Orders[Sales] / Orders[Quantity]

<span class="dax-comment">// Categor√≠a de venta</span>
<span class="dax-keyword">Sale Category</span> = 
<span class="dax-function">IF</span>(
    Orders[Sales] > <span class="dax-number">1000</span>,
    <span class="dax-string">"Alto"</span>,
    <span class="dax-string">"Bajo"</span>
)</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Common DAX Functions -->
            <div class="mb-5">
                <h3 class="text-primary mb-4">Funciones DAX Esenciales</h3>

                <div class="custom-tabs">
                    <button class="tab-btn active" onclick="showTab(event, 'aggregation')">Agregaci√≥n</button>
                    <button class="tab-btn" onclick="showTab(event, 'filter')">Filtros</button>
                    <button class="tab-btn" onclick="showTab(event, 'time')">Inteligencia Temporal</button>
                    <button class="tab-btn" onclick="showTab(event, 'logical')">L√≥gicas</button>
                </div>

                <!-- Aggregation Tab -->
                <div id="aggregation" class="tab-content active">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-plus-circle"></i> SUM / SUMX</div>
                                <div class="code-block">
<code><span class="dax-comment">// Suma simple</span>
<span class="dax-keyword">Total Revenue</span> = <span class="dax-function">SUM</span>(Orders[Sales])

<span class="dax-comment">// Suma iterativa (fila por fila)</span>
<span class="dax-keyword">Total Cost</span> = <span class="dax-function">SUMX</span>(
    Orders,
    Orders[Quantity] * Orders[Unit Cost]
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-calculator"></i> AVERAGE / AVERAGEX</div>
                                <div class="code-block">
<code><span class="dax-comment">// Promedio simple</span>
<span class="dax-keyword">Avg Sales</span> = <span class="dax-function">AVERAGE</span>(Orders[Sales])

<span class="dax-comment">// Promedio ponderado</span>
<span class="dax-keyword">Avg Discount</span> = <span class="dax-function">AVERAGEX</span>(
    Orders,
    Orders[Discount]
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-hash"></i> COUNT / COUNTROWS</div>
                                <div class="code-block">
<code><span class="dax-comment">// Contar valores no vac√≠os</span>
<span class="dax-keyword">Product Count</span> = <span class="dax-function">COUNT</span>(Products[ProductID])

<span class="dax-comment">// Contar filas de tabla</span>
<span class="dax-keyword">Order Count</span> = <span class="dax-function">COUNTROWS</span>(Orders)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-bar-chart"></i> MAX / MIN</div>
                                <div class="code-block">
<code><span class="dax-comment">// Valor m√°ximo</span>
<span class="dax-keyword">Max Sale</span> = <span class="dax-function">MAX</span>(Orders[Sales])

<span class="dax-comment">// Valor m√≠nimo</span>
<span class="dax-keyword">Min Sale</span> = <span class="dax-function">MIN</span>(Orders[Sales])</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filter Tab -->
                <div id="filter" class="tab-content">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-funnel-fill"></i> CALCULATE</div>
                                <p>La funci√≥n m√°s importante de DAX. Modifica el contexto de filtro.</p>
                                <div class="code-block">
<code><span class="dax-comment">// Ventas solo de categor√≠a Furniture</span>
<span class="dax-keyword">Furniture Sales</span> = 
<span class="dax-function">CALCULATE</span>(
    <span class="dax-function">SUM</span>(Orders[Sales]),
    Orders[Category] = <span class="dax-string">"Furniture"</span>
)

<span class="dax-comment">// Ventas a√±o anterior</span>
<span class="dax-keyword">Sales LY</span> = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    <span class="dax-function">SAMEPERIODLASTYEAR</span>(Calendar[Date])
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-filter"></i> FILTER</div>
                                <p>Retorna una tabla filtrada que se puede usar en otras funciones.</p>
                                <div class="code-block">
<code><span class="dax-comment">// Ventas con descuento mayor a 20%</span>
<span class="dax-keyword">High Discount Sales</span> = 
<span class="dax-function">CALCULATE</span>(
    <span class="dax-function">SUM</span>(Orders[Sales]),
    <span class="dax-function">FILTER</span>(
        Orders,
        Orders[Discount] > <span class="dax-number">0.2</span>
    )
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-view-list"></i> ALL / ALLEXCEPT</div>
                                <div class="code-block">
<code><span class="dax-comment">// Total sin filtros</span>
<span class="dax-keyword">Total Sales All</span> = 
<span class="dax-function">CALCULATE</span>(
    <span class="dax-function">SUM</span>(Orders[Sales]),
    <span class="dax-function">ALL</span>(Orders)
)

<span class="dax-comment">// % del total</span>
<span class="dax-keyword">% of Total</span> = 
<span class="dax-function">DIVIDE</span>(
    [Total Sales],
    [Total Sales All]
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-layers"></i> RELATED</div>
                                <div class="code-block">
<code><span class="dax-comment">// Traer datos de tabla relacionada</span>
<span class="dax-keyword">Product Category</span> = 
<span class="dax-function">RELATED</span>(Products[Category])

<span class="dax-comment">// En columna calculada de Orders</span>
<span class="dax-keyword">Customer Segment</span> = 
<span class="dax-function">RELATED</span>(Customers[Segment])</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Time Intelligence Tab -->
                <div id="time" class="tab-content">
                    <div class="callout callout-info mb-4">
                        <i class="bi bi-info-circle-fill callout-icon"></i>
                        <strong>Requisito:</strong> Las funciones de Time Intelligence requieren una tabla de calendario (Date Table) con fechas continuas.
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-calendar-check"></i> YTD / QTD / MTD</div>
                                <p>Acumulados hasta la fecha (Year/Quarter/Month To Date)</p>
                                <div class="code-block">
<code><span class="dax-comment">// Ventas acumuladas del a√±o</span>
<span class="dax-keyword">Sales YTD</span> = 
<span class="dax-function">TOTALYTD</span>(
    [Total Sales],
    Calendar[Date]
)

<span class="dax-comment">// Acumulado del mes</span>
<span class="dax-keyword">Sales MTD</span> = 
<span class="dax-function">TOTALMTD</span>(
    [Total Sales],
    Calendar[Date]
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-arrow-left-right"></i> Comparaciones Temporales</div>
                                <div class="code-block">
<code><span class="dax-comment">// Mismo per√≠odo a√±o anterior</span>
<span class="dax-keyword">Sales LY</span> = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    <span class="dax-function">SAMEPERIODLASTYEAR</span>(Calendar[Date])
)

<span class="dax-comment">// Crecimiento Year-over-Year</span>
<span class="dax-keyword">YoY Growth</span> = 
<span class="dax-function">DIVIDE</span>(
    [Total Sales] - [Sales LY],
    [Sales LY]
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-clock-history"></i> DATEADD</div>
                                <div class="code-block">
<code><span class="dax-comment">// Ventas mes anterior</span>
<span class="dax-keyword">Sales Previous Month</span> = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    <span class="dax-function">DATEADD</span>(Calendar[Date], <span class="dax-number">-1</span>, MONTH)
)

<span class="dax-comment">// Ventas pr√≥ximo trimestre</span>
<span class="dax-keyword">Sales Next Quarter</span> = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    <span class="dax-function">DATEADD</span>(Calendar[Date], <span class="dax-number">1</span>, QUARTER)
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-calendar-range"></i> DATESBETWEEN</div>
                                <div class="code-block">
<code><span class="dax-comment">// Ventas en rango espec√≠fico</span>
<span class="dax-keyword">Sales in Period</span> = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    <span class="dax-function">DATESBETWEEN</span>(
        Calendar[Date],
        <span class="dax-function">DATE</span>(<span class="dax-number">2024</span>,<span class="dax-number">1</span>,<span class="dax-number">1</span>),
        <span class="dax-function">DATE</span>(<span class="dax-number">2024</span>,<span class="dax-number">6</span>,<span class="dax-number">30</span>)
    )
)</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Logical Tab -->
                <div id="logical" class="tab-content">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-question-circle"></i> IF / SWITCH</div>
                                <div class="code-block">
<code><span class="dax-comment">// IF simple</span>
<span class="dax-keyword">Sales Level</span> = 
<span class="dax-function">IF</span>(
    [Total Sales] > <span class="dax-number">10000</span>,
    <span class="dax-string">"Alto"</span>,
    <span class="dax-string">"Bajo"</span>
)

<span class="dax-comment">// SWITCH para m√∫ltiples casos</span>
<span class="dax-keyword">Region Name</span> = 
<span class="dax-function">SWITCH</span>(
    Orders[Region],
    <span class="dax-string">"E"</span>, <span class="dax-string">"Este"</span>,
    <span class="dax-string">"W"</span>, <span class="dax-string">"Oeste"</span>,
    <span class="dax-string">"Unknown"</span>
)</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="dax-example">
                                <div class="dax-example-title"><i class="bi bi-signpost-split"></i> AND / OR</div>
                                <div class="code-block">
<code><span class="dax-comment">// Condiciones m√∫ltiples AND</span>
<span class="dax-keyword">Premium Sales</span> = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    <span class="dax-function">AND</span>(
        Orders[Sales] > <span class="dax-number">1000</span>,
        Orders[Profit] > <span class="dax-number">200</span>
    )
)

<span class="dax-comment">// Condiciones m√∫ltiples OR</span>
<span class="dax-keyword">Special Sales</span> = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    <span class="dax-function">OR</span>(
        Orders[Category] = <span class="dax-string">"Tech"</span>,
        Orders[Sales] > <span class="dax-number">5000</span>
    )
)</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Best Practices -->
            <div class="callout callout-success">
                <h5><i class="bi bi-lightbulb-fill callout-icon"></i>Mejores Pr√°cticas DAX</h5>
                <ul class="mb-0">
                    <li><strong>Usa medidas en lugar de columnas calculadas</strong> cuando sea posible (mejor performance)</li>
                    <li><strong>Nombra claramente</strong> tus medidas (ej: "Total Sales" en lugar de "Measure1")</li>
                    <li><strong>Formatea n√∫meros</strong> adecuadamente (moneda, porcentaje, decimales)</li>
                    <li><strong>Comenta tu c√≥digo DAX</strong> para futuras referencias</li>
                    <li><strong>Evita funciones anidadas complejas</strong> - div√≠delas en medidas intermedias</li>
                    <li><strong>Usa variables (VAR)</strong> para c√°lculos repetidos y mejor legibilidad</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Sharing Reports Section -->
    <section id="compartir" class="bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Compartir Informes en Power BI</h2>
                <p class="text-muted mt-3">M√©todos para distribuir y colaborar en tus dashboards</p>
            </div>

            <!-- Introduction -->
            <div class="row mb-5">
                <div class="col-lg-8 mx-auto">
                    <div class="card p-4">
                        <h4 class="text-primary mb-3">¬øPor qu√© compartir informes?</h4>
                        <p>Compartir informes de Power BI permite democratizar el acceso a datos y an√°lisis en tu organizaci√≥n, facilitando la toma de decisiones basada en datos a todos los niveles.</p>
                        <p class="mb-0">Power BI ofrece m√∫ltiples m√©todos de compartici√≥n seg√∫n tus necesidades de colaboraci√≥n, seguridad y audiencia.</p>
                    </div>
                </div>
            </div>

            <!-- Sharing Methods -->
            <h3 class="text-primary mb-4">M√©todos de Compartici√≥n</h3>

            <div class="row mb-5">
                <div class="col-lg-4 mb-4">
                    <div class="sharing-method">
                        <div class="text-center">
                            <i class="bi bi-share-fill sharing-icon"></i>
                        </div>
                        <h5 class="sharing-title">1. Compartir Enlace Directo</h5>
                        <p><strong>¬øC√≥mo funciona?</strong></p>
                        <ul>
                            <li>Genera un enlace √∫nico al informe</li>
                            <li>Env√≠a por email o Teams</li>
                            <li>Los usuarios necesitan licencia Power BI</li>
                        </ul>
                        <p class="mt-3"><strong>Pasos:</strong></p>
                        <ol>
                            <li>Publica informe en Power BI Service</li>
                            <li>Clic en "Compartir" en el informe</li>
                            <li>Ingresa emails de destinatarios</li>
                            <li>Configura permisos (ver/editar)</li>
                            <li>Enviar invitaci√≥n</li>
                        </ol>
                        <div class="callout callout-info mt-3">
                            <i class="bi bi-info-circle callout-icon"></i>
                            <strong>Ideal para:</strong> Colaboraci√≥n r√°pida con colegas internos
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 mb-4">
                    <div class="sharing-method">
                        <div class="text-center">
                            <i class="bi bi-cloud-upload-fill sharing-icon"></i>
                        </div>
                        <h5 class="sharing-title">2. Publicar en Workspace</h5>
                        <p><strong>¬øC√≥mo funciona?</strong></p>
                        <ul>
                            <li>Sube informe a espacio de trabajo compartido</li>
                            <li>Gestiona permisos por workspace</li>
                            <li>Colaboraci√≥n estructurada en equipo</li>
                        </ul>
                        <p class="mt-3"><strong>Pasos:</strong></p>
                        <ol>
                            <li>Crea workspace en Power BI Service</li>
                            <li>Asigna miembros (Admin, Member, Contributor, Viewer)</li>
                            <li>Publica desde Desktop al workspace</li>
                            <li>Configura actualizaci√≥n de datos</li>
                            <li>Usuarios acceden desde workspace compartido</li>
                        </ol>
                        <div class="callout callout-success mt-3">
                            <i class="bi bi-check-circle callout-icon"></i>
                            <strong>Ideal para:</strong> Equipos que trabajan en m√∫ltiples informes
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 mb-4">
                    <div class="sharing-method">
                        <div class="text-center">
                            <i class="bi bi-globe sharing-icon"></i>
                        </div>
                        <h5 class="sharing-title">3. Publicar en Web (P√∫blico)</h5>
                        <p><strong>¬øC√≥mo funciona?</strong></p>
                        <ul>
                            <li>Genera c√≥digo embed HTML</li>
                            <li>Acceso p√∫blico sin autenticaci√≥n</li>
                            <li>Incrusta en sitios web o blogs</li>
                        </ul>
                        <p class="mt-3"><strong>Pasos:</strong></p>
                        <ol>
                            <li>Abre informe en Power BI Service</li>
                            <li>Archivo ‚Üí Insertar ‚Üí Publicar en web</li>
                            <li>Confirma riesgos de seguridad</li>
                            <li>Copia c√≥digo embed o enlace</li>
                            <li>Inserta en tu sitio web</li>
                        </ol>
                        <div class="callout callout-warning mt-3">
                            <i class="bi bi-exclamation-triangle callout-icon"></i>
                            <strong>¬°Cuidado!</strong> Solo usa con datos p√∫blicos (sin informaci√≥n sensible)
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional Methods -->
            <h3 class="text-primary mb-4">M√©todos Adicionales</h3>
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card p-4 h-100">
                        <h5 class="text-primary mb-3"><i class="bi bi-app me-2"></i>Power BI Apps</h5>
                        <p><strong>¬øQu√© es?</strong> Empaqueta m√∫ltiples informes y dashboards en una app distribuible.</p>
                        <p><strong>Ventajas:</strong></p>
                        <ul>
                            <li>Experiencia simplificada para usuarios finales</li>
                            <li>Actualizaci√≥n centralizada de contenido</li>
                            <li>Permisos a nivel de app completa</li>
                        </ul>
                        <p><strong>Uso:</strong> Workspace ‚Üí Crear app ‚Üí Configurar navegaci√≥n ‚Üí Publicar</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card p-4 h-100">
                        <h5 class="text-primary mb-3"><i class="bi bi-envelope me-2"></i>Suscripciones por Email</h5>
                        <p><strong>¬øQu√© es?</strong> Env√≠o autom√°tico de snapshots del informe por correo.</p>
                        <p><strong>Ventajas:</strong></p>
                        <ul>
                            <li>Usuarios reciben informes peri√≥dicamente</li>
                            <li>Configurable por horario (diario/semanal/mensual)</li>
                            <li>No requiere abrir Power BI Service</li>
                        </ul>
                        <p><strong>Uso:</strong> Informe ‚Üí Suscribirse ‚Üí Configurar frecuencia ‚Üí A√±adir emails</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card p-4 h-100">
                        <h5 class="text-primary mb-3"><i class="bi bi-file-pdf me-2"></i>Exportar a PDF/PowerPoint</h5>
                        <p><strong>¬øQu√© es?</strong> Descarga est√°tica del informe en formato PDF o PPTX.</p>
                        <p><strong>Ventajas:</strong></p>
                        <ul>
                            <li>Compartir sin necesidad de Power BI</li>
                            <li>Ideal para presentaciones offline</li>
                            <li>Conserva dise√±o visual</li>
                        </ul>
                        <p><strong>Limitaci√≥n:</strong> No es interactivo, es una imagen est√°tica</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card p-4 h-100">
                        <h5 class="text-primary mb-3"><i class="bi bi-microsoft-teams me-2"></i>Integraci√≥n con Teams</h5>
                        <p><strong>¬øQu√© es?</strong> Inserta informes directamente en canales de Microsoft Teams.</p>
                        <p><strong>Ventajas:</strong></p>
                        <ul>
                            <li>Acceso directo desde Teams</li>
                            <li>Colaboraci√≥n en tiempo real</li>
                            <li>Notificaciones de actualizaci√≥n</li>
                        </ul>
                        <p><strong>Uso:</strong> Canal de Teams ‚Üí + ‚Üí Power BI ‚Üí Seleccionar informe</p>
                    </div>
                </div>
            </div>

            <!-- Comparison Table -->
            <h3 class="text-primary mb-4 mt-5">Comparaci√≥n de M√©todos</h3>
            <div class="table-responsive">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>M√©todo</th>
                            <th>Requiere Licencia</th>
                            <th>Interactivo</th>
                            <th>Control de Seguridad</th>
                            <th>Mejor Para</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Enlace Directo</strong></td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠ (Pro/PPU)</td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠</td>
                            <td>Alta</td>
                            <td>Colaboraci√≥n interna r√°pida</td>
                        </tr>
                        <tr>
                            <td><strong>Workspace</strong></td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠</td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠</td>
                            <td>Muy Alta</td>
                            <td>Equipos estructurados</td>
                        </tr>
                        <tr>
                            <td><strong>Publicar en Web</strong></td>
                            <td><i class="bi bi-x-circle-fill times-icon"></i> No</td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠</td>
                            <td>Ninguna (P√∫blico)</td>
                            <td>Datos p√∫blicos en sitios web</td>
                        </tr>
                        <tr>
                            <td><strong>Power BI App</strong></td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠ (lectores: Free con Premium)</td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠</td>
                            <td>Alta</td>
                            <td>Distribuci√≥n masiva organizada</td>
                        </tr>
                        <tr>
                            <td><strong>Suscripci√≥n Email</strong></td>
                            <td><i class="bi bi-check-circle-fill check-icon"></i> S√≠</td>
                            <td><i class="bi bi-x-circle-fill times-icon"></i> No (snapshot)</td>
                            <td>Media</td>
                            <td>Reportes peri√≥dicos autom√°ticos</td>
                        </tr>
                        <tr>
                            <td><strong>Export PDF/PPTX</strong></td>
                            <td><i class="bi bi-x-circle-fill times-icon"></i> No (para lector)</td>
                            <td><i class="bi bi-x-circle-fill times-icon"></i> No</td>
                            <td>Baja</td>
                            <td>Presentaciones offline</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Security Section -->
    <section id="seguridad">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Seguridad y Control de Acceso</h2>
                <p class="text-muted mt-3">Protege tus datos con configuraciones avanzadas de seguridad</p>
            </div>

            <!-- Introduction -->
            <div class="row mb-5">
                <div class="col-lg-8 mx-auto">
                    <div class="callout callout-danger">
                        <i class="bi bi-shield-lock-fill callout-icon"></i>
                        <strong>Principio fundamental:</strong> Cuando compartes datos, la seguridad es cr√≠tica. Power BI ofrece m√∫ltiples capas de protecci√≥n para asegurar que solo las personas correctas vean la informaci√≥n correcta.
                    </div>
                </div>
            </div>

            <!-- Security Features -->
            <h3 class="text-primary mb-4">Caracter√≠sticas de Seguridad</h3>

            <div class="row mb-5">
                <div class="col-lg-6 mb-4">
                    <div class="security-feature">
                        <div class="security-icon-box">
                            <i class="bi bi-person-lock"></i>
                        </div>
                        <div>
                            <h5 class="text-primary mb-2">Permisos de Compartici√≥n</h5>
                            <p class="mb-2">Controla qu√© pueden hacer los usuarios con tu informe:</p>
                            <ul class="mb-0">
                                <li><strong>Ver:</strong> Solo lectura, no puede editar ni compartir</li>
                                <li><strong>Crear contenido:</strong> Puede hacer copias y crear informes basados en el dataset</li>
                                <li><strong>Compartir nuevamente:</strong> Puede compartir con otros usuarios</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <div class="security-feature">
                        <div class="security-icon-box">
                            <i class="bi bi-key-fill"></i>
                        </div>
                        <div>
                            <h5 class="text-primary mb-2">Row-Level Security (RLS)</h5>
                            <p class="mb-2">Filtra datos a nivel de fila seg√∫n el usuario que accede:</p>
                            <ul class="mb-0">
                                <li>Define roles con filtros DAX</li>
                                <li>Asigna usuarios a roles espec√≠ficos</li>
                                <li>Cada usuario ve solo "sus" datos</li>
                                <li>Ejemplo: Gerentes solo ven su regi√≥n</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <div class="security-feature">
                        <div class="security-icon-box">
                            <i class="bi bi-shield-check"></i>
                        </div>
                        <div>
                            <h5 class="text-primary mb-2">Roles de Workspace</h5>
                            <p class="mb-2">Permisos jer√°rquicos en espacios de trabajo:</p>
                            <ul class="mb-0">
                                <li><strong>Admin:</strong> Control total, gesti√≥n de miembros</li>
                                <li><strong>Member:</strong> Edita y publica contenido</li>
                                <li><strong>Contributor:</strong> Crea contenido, no puede publicar</li>
                                <li><strong>Viewer:</strong> Solo lectura del contenido</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <div class="security-feature">
                        <div class="security-icon-box">
                            <i class="bi bi-lock-fill"></i>
                        </div>
                        <div>
                            <h5 class="text-primary mb-2">Cifrado de Datos</h5>
                            <p class="mb-2">Power BI protege datos en m√∫ltiples niveles:</p>
                            <ul class="mb-0">
                                <li><strong>En tr√°nsito:</strong> HTTPS/TLS para transmisi√≥n</li>
                                <li><strong>En reposo:</strong> Cifrado AES-256 en servidores</li>
                                <li><strong>Autenticaci√≥n:</strong> Azure Active Directory (AAD)</li>
                                <li><strong>Certificaciones:</strong> ISO 27001, SOC 1/2</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RLS Implementation -->
            <h3 class="text-primary mb-4">Implementar Row-Level Security (RLS)</h3>
            
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="card p-4">
                        <h5 class="text-primary mb-3">Paso a Paso: Configurar RLS</h5>
                        
                        <div class="mb-4">
                            <h6 class="text-primary"><strong>1. En Power BI Desktop - Crear Roles</strong></h6>
                            <ol>
                                <li>Modelado ‚Üí Administrar roles</li>
                                <li>Crear ‚Üí Nombra el rol (ej: "Sales_East")</li>
                                <li>Selecciona tabla a filtrar (ej: Orders)</li>
                                <li>Agrega filtro DAX:</li>
                            </ol>
                            <div class="code-block">
<code><span class="dax-comment">// Solo mostrar datos de regi√≥n Este</span>
[Region] = <span class="dax-string">"East"</span>

<span class="dax-comment">// Filtro din√°mico por email del usuario</span>
[Email] = <span class="dax-function">USERPRINCIPALNAME</span>()</code>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h6 class="text-primary"><strong>2. Probar Roles Localmente</strong></h6>
                            <ol>
                                <li>Modelado ‚Üí Ver como roles</li>
                                <li>Selecciona rol a probar</li>
                                <li>Verifica que datos se filtren correctamente</li>
                            </ol>
                        </div>

                        <div class="mb-4">
                            <h6 class="text-primary"><strong>3. Publicar y Asignar Usuarios</strong></h6>
                            <ol>
                                <li>Publica informe a Power BI Service</li>
                                <li>Ve al Dataset ‚Üí Seguridad</li>
                                <li>Selecciona rol</li>
                                <li>Agrega miembros (usuarios o grupos AAD)</li>
                                <li>Guardar</li>
                            </ol>
                        </div>

                        <div class="callout callout-success">
                            <i class="bi bi-check-circle-fill callout-icon"></i>
                            <strong>Ejemplo pr√°ctico:</strong> Una empresa con vendedores por regi√≥n. Cada vendedor solo debe ver ventas de su regi√≥n. Creas roles "Sales_East", "Sales_West", etc., con filtro <code>[Region] = "East"</code>, y asignas usuarios seg√∫n su regi√≥n.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Best Practices -->
            <div class="callout callout-warning">
                <h5><i class="bi bi-exclamation-triangle-fill callout-icon"></i>Mejores Pr√°cticas de Seguridad</h5>
                <ul class="mb-0">
                    <li><strong>Principio de m√≠nimo privilegio:</strong> Otorga solo los permisos necesarios</li>
                    <li><strong>Revisa accesos peri√≥dicamente:</strong> Audita qui√©n tiene acceso a qu√©</li>
                    <li><strong>No uses "Publicar en web"</strong> con datos sensibles (es p√∫blico sin autenticaci√≥n)</li>
                    <li><strong>Usa grupos de seguridad AAD:</strong> Facilita gesti√≥n de usuarios masiva</li>
                    <li><strong>Documenta roles RLS:</strong> Mant√©n registro de qu√© rol ve qu√© datos</li>
                    <li><strong>Prueba RLS exhaustivamente:</strong> Valida filtros antes de producci√≥n</li>
                    <li><strong>Capacita usuarios:</strong> Educar sobre manejo responsable de datos</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Pr√°ctica -->
    <section id="practica" class="bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Actividad Pr√°ctica Guiada</h2>
                <p class="text-muted mt-3">Aplica DAX y compartici√≥n en un ejercicio completo</p>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card p-4 mb-4">
                        <h4 class="text-primary mb-4">
                            <i class="bi bi-clipboard-check me-2"></i>Ejercicio: Dashboard con DAX y Compartici√≥n Segura
                        </h4>

                        <div class="callout callout-info mb-4">
                            <i class="bi bi-file-earmark-spreadsheet callout-icon"></i>
                            <strong>Dataset:</strong> Usa el Sample_Superstore_Complete.xlsx de la Unidad 3
                        </div>

                        <h5 class="text-primary mb-3">Parte 1: Crear Medidas DAX (30 min)</h5>
                        <ol class="lead mb-4">
                            <li class="mb-3">
                                <strong>Medidas B√°sicas:</strong>
                                <div class="code-block mt-2">
<code>Total Sales = <span class="dax-function">SUM</span>(Orders[Sales])
Total Profit = <span class="dax-function">SUM</span>(Orders[Profit])
Total Orders = <span class="dax-function">COUNTROWS</span>(Orders)
Avg Order Value = <span class="dax-function">DIVIDE</span>([Total Sales], [Total Orders])</code>
                                </div>
                            </li>

                            <li class="mb-3">
                                <strong>Medida de Margen:</strong>
                                <div class="code-block mt-2">
<code>Profit Margin % = 
<span class="dax-function">DIVIDE</span>(
    [Total Profit],
    [Total Sales],
    <span class="dax-number">0</span>  <span class="dax-comment">// Retorna 0 si divisi√≥n por cero</span>
)</code>
                                </div>
                            </li>

                            <li class="mb-3">
                                <strong>Ventas por Categor√≠a (con CALCULATE):</strong>
                                <div class="code-block mt-2">
<code>Furniture Sales = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    Orders[Category] = <span class="dax-string">"Furniture"</span>
)

Technology Sales = 
<span class="dax-function">CALCULATE</span>(
    [Total Sales],
    Orders[Category] = <span class="dax-string">"Technology"</span>
)</code>
                                </div>
                            </li>

                            <li class="mb-3">
                                <strong>Tabla de Calendario (para Time Intelligence):</strong>
                                <div class="code-block mt-2">
<code>Calendar = 
<span class="dax-function">CALENDAR</span>(
    <span class="dax-function">DATE</span>(<span class="dax-number">2014</span>, <span class="dax-number">1</span>, <span class="dax-number">1</span>),
    <span class="dax-function">DATE</span>(<span class="dax-number">2017</span>, <span class="dax-number">12</span>, <span class="dax-number">31</span>)
)</code>
                                </div>
                                <p class="mt-2"><em>Luego relaciona Calendar[Date] con Orders[Order Date]</em></p>
                            </li>

                            <li class="mb-3">
                                <strong>Medidas YTD (Year To Date):</strong>
                                <div class="code-block mt-2">
<code>Sales YTD = 
<span class="dax-function">TOTALYTD</span>(
    [Total Sales],
    Calendar[Date]
)

YTD vs LY = 
<span class="dax-function">DIVIDE</span>(
    [Sales YTD] - [Sales YTD LY],
    [Sales YTD LY]
)

Sales YTD LY = 
<span class="dax-function">CALCULATE</span>(
    [Sales YTD],
    <span class="dax-function">SAMEPERIODLASTYEAR</span>(Calendar[Date])
)</code>
                                </div>
                            </li>
                        </ol>

                        <h5 class="text-primary mb-3 mt-5">Parte 2: Crear Visualizaciones (20 min)</h5>
                        <ol class="lead mb-4" start="6">
                            <li class="mb-2">Crea tarjetas para: Total Sales, Total Profit, Profit Margin %, Avg Order Value</li>
                            <li class="mb-2">Gr√°fico de barras: Sales por Category (usa medida Total Sales)</li>
                            <li class="mb-2">Gr√°fico de l√≠neas: Sales YTD vs Sales YTD LY (muestra comparaci√≥n temporal)</li>
                            <li class="mb-2">Tabla: Top 10 productos por Profit (ordena descendente)</li>
                            <li class="mb-2">Agrega segmentadores para: Year, Category, Region</li>
                        </ol>

                        <h5 class="text-primary mb-3 mt-5">Parte 3: Configurar RLS (15 min)</h5>
                        <ol class="lead mb-4" start="11">
                            <li class="mb-3">
                                <strong>Crear Roles por Regi√≥n:</strong>
                                <ul>
                                    <li>Modelado ‚Üí Administrar roles</li>
                                    <li>Crear rol "East_Region"</li>
                                    <li>En tabla Orders, filtro DAX: <code>[Region] = "East"</code></li>
                                    <li>Repetir para West, Central, South</li>
                                </ul>
                            </li>
                            <li class="mb-3">
                                <strong>Probar RLS:</strong>
                                <ul>
                                    <li>Modelado ‚Üí Ver como roles ‚Üí Selecciona "East_Region"</li>
                                    <li>Verifica que solo ves datos de regi√≥n Este</li>
                                </ul>
                            </li>
                        </ol>

                        <h5 class="text-primary mb-3 mt-5">Parte 4: Publicar y Compartir (15 min)</h5>
                        <ol class="lead mb-4" start="13">
                            <li class="mb-2">Guarda el archivo .pbix</li>
                            <li class="mb-2">Publicar ‚Üí Selecciona "Mi √°rea de trabajo"</li>
                            <li class="mb-3">
                                <strong>En Power BI Service:</strong>
                                <ul>
                                    <li>Ve al dataset publicado ‚Üí Seguridad</li>
                                    <li>Asigna tu email a rol "East_Region"</li>
                                    <li>Guarda</li>
                                </ul>
                            </li>
                            <li class="mb-3">
                                <strong>Compartir el informe:</strong>
                                <ul>
                                    <li>Abre el informe</li>
                                    <li>Compartir ‚Üí Ingresa email de un colega (o tu email secundario)</li>
                                    <li>Marca "Permitir que los destinatarios compartan"</li>
                                    <li>Enviar</li>
                                </ul>
                            </li>
                            <li class="mb-2">Crea una suscripci√≥n por email (diaria o semanal)</li>
                        </ol>

                        <div class="callout callout-success mt-4">
                            <i class="bi bi-trophy-fill callout-icon"></i>
                            <strong>¬°Excelente trabajo!</strong> Has creado un dashboard completo con c√°lculos DAX avanzados, implementado seguridad a nivel de fila y compartido tu informe de forma segura. Estas habilidades son fundamentales en proyectos reales de Power BI.
                        </div>

                        <div class="callout callout-warning mt-3">
                            <i class="bi bi-star-fill callout-icon"></i>
                            <strong>Desaf√≠o adicional:</strong> Crea una medida que calcule el ranking de productos por ventas usando <code>RANKX()</code>, y agrega un gr√°fico que muestre solo el Top 5.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Autoevaluaci√≥n -->
    <section id="autoevaluacion">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Autoevaluaci√≥n</h2>
                <p class="text-muted mt-3">Eval√∫a tu comprensi√≥n de DAX y compartici√≥n de informes</p>
            </div>
            
            <div class="quiz-container">
                <div id="quiz">
                    <!-- Las preguntas se generan din√°micamente con JavaScript -->
                </div>
                <div id="quiz-result" style="display: none;"></div>
                <div class="text-center mt-4">
                    <button id="submit-quiz" class="btn btn-quiz btn-lg">
                        <i class="bi bi-check-circle me-2"></i>Verificar Respuestas
                    </button>
                    <button id="restart-quiz" class="btn btn-quiz btn-lg" style="display: none;">
                        <i class="bi bi-arrow-clockwise me-2"></i>Reiniciar Quiz
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <h5>Unidad 4: DAX y Compartici√≥n de Informes en Power BI</h5>
                    <p class="mb-2">Curso de Business Intelligence y An√°lisis de Datos</p>
                    <p><strong>Instructor:</strong> Johan Tapia PhD.</p>
                    <a href="https://www.linkedin.com/in/johan-tapia-192183281/" target="_blank" class="linkedin-badge">
                        <i class="bi bi-linkedin"></i>
                        Conectar en LinkedIn
                    </a>
                </div>
                <div class="col-md-6 text-md-end">
                    <h5>Enlaces √ötiles</h5>
                    <p>
                        <a href="#home">Volver arriba</a><br>
                        <a href="https://dax.guide" target="_blank">DAX Guide</a><br>
                        <a href="https://learn.microsoft.com/power-bi/guidance/dax-best-practices" target="_blank">DAX Best Practices</a>
                    </p>
                </div>
            </div>
            <hr class="my-4" style="border-color: rgba(255,255,255,0.3);">
            <div class="text-center">
                <p class="mb-0">&copy; 2025 Johan Tapia PhD. - Todos los derechos reservados</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="backToTop">
        <i class="bi bi-arrow-up"></i>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ============================================
        // TABS FUNCTIONALITY
        // ============================================
        function showTab(evt, tabName) {
            // Hide all tab content
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // Remove active class from all buttons
            const tabBtns = document.getElementsByClassName('tab-btn');
            for (let i = 0; i < tabBtns.length; i++) {
                tabBtns[i].classList.remove('active');
            }
            
            // Show current tab and mark button as active
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
        }

        // ============================================
        // COPY CODE FUNCTIONALITY
        // ============================================
        function copyCode(button) {
            const codeBlock = button.closest('.code-header').nextElementSibling;
            const code = codeBlock.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = '‚úì Copiado';
                button.style.background = '#28a745';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 2000);
            });
        }

        // ============================================
        // QUIZ FUNCTIONALITY
        // ============================================
        
        const quizData = [
            {
                question: "¬øCu√°l es la diferencia principal entre una medida y una columna calculada en DAX?",
                options: [
                    "No hay diferencia, son lo mismo",
                    "Las medidas se calculan din√°micamente seg√∫n contexto; las columnas se calculan fila por fila y se almacenan",
                    "Las columnas calculadas son m√°s r√°pidas que las medidas",
                    "Las medidas solo funcionan con n√∫meros enteros"
                ],
                correct: 1
            },
            {
                question: "¬øQu√© funci√≥n DAX usar√≠as para calcular ventas acumuladas del a√±o hasta la fecha (YTD)?",
                options: [
                    "SUMYTD()",
                    "TOTALYTD()",
                    "YEARTODATE()",
                    "CALCULATE(YTD)"
                ],
                correct: 1
            },
            {
                question: "¬øCu√°l es el prop√≥sito principal de la funci√≥n CALCULATE en DAX?",
                options: [
                    "Realizar operaciones matem√°ticas b√°sicas",
                    "Modificar el contexto de filtro de un c√°lculo",
                    "Crear columnas calculadas",
                    "Importar datos externos"
                ],
                correct: 1
            },
            {
                question: "¬øQu√© m√©todo de compartici√≥n NO requiere que los usuarios tengan licencia Power BI?",
                options: [
                    "Compartir enlace directo",
                    "Publicar en Workspace",
                    "Publicar en web (p√∫blico)",
                    "Power BI App"
                ],
                correct: 2
            },
            {
                question: "¬øQu√© es Row-Level Security (RLS) en Power BI?",
                options: [
                    "Un tipo de gr√°fico para mostrar datos por filas",
                    "Una caracter√≠stica que restringe el acceso a datos a nivel de fila seg√∫n el usuario",
                    "Un m√©todo para ordenar filas en tablas",
                    "Una funci√≥n DAX para contar filas"
                ],
                correct: 1
            },
            {
                question: "¬øCu√°l de estas funciones DAX sirve para traer datos de una tabla relacionada?",
                options: [
                    "LOOKUP()",
                    "RELATED()",
                    "JOIN()",
                    "MERGE()"
                ],
                correct: 1
            },
            {
                question: "¬øCu√°l es la mejor pr√°ctica al compartir informes con datos sensibles?",
                options: [
                    "Usar 'Publicar en web' para facilitar el acceso",
                    "Enviar capturas de pantalla por email",
                    "Usar Workspace con permisos controlados y RLS",
                    "Compartir el archivo .pbix por USB"
                ],
                correct: 2
            },
            {
                question: "¬øQu√© funci√≥n DAX usar√≠as para evitar errores de divisi√≥n por cero?",
                options: [
                    "SAFE_DIVIDE()",
                    "DIVIDE()",
                    "IFERROR()",
                    "TRYDIVIDE()"
                ],
                correct: 1
            }
        ];

        let userAnswers = [];
        let quizSubmitted = false;

        function renderQuiz() {
            const quizContainer = document.getElementById('quiz');
            quizContainer.innerHTML = '';
            userAnswers = [];
            quizSubmitted = false;

            quizData.forEach((question, qIndex) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.id = `question-${qIndex}`;

                let questionHTML = `
                    <div class="question-text">
                        <span class="badge bg-primary me-2">Pregunta ${qIndex + 1}</span>
                        ${question.question}
                    </div>
                `;

                question.options.forEach((option, oIndex) => {
                    questionHTML += `
                        <div class="option" data-question="${qIndex}" data-option="${oIndex}">
                            <i class="bi bi-circle me-2"></i>
                            ${option}
                        </div>
                    `;
                });

                questionCard.innerHTML = questionHTML;
                quizContainer.appendChild(questionCard);
            });

            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', handleOptionClick);
            });
        }

        function handleOptionClick(e) {
            if (quizSubmitted) return;

            const questionIndex = parseInt(e.currentTarget.dataset.question);
            const optionIndex = parseInt(e.currentTarget.dataset.option);

            document.querySelectorAll(`.option[data-question="${questionIndex}"]`).forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('i').className = 'bi bi-circle me-2';
            });

            e.currentTarget.classList.add('selected');
            e.currentTarget.querySelector('i').className = 'bi bi-check-circle-fill me-2';

            userAnswers[questionIndex] = optionIndex;
        }

        function checkAnswers() {
            if (userAnswers.length !== quizData.length) {
                alert('Por favor, responde todas las preguntas antes de verificar.');
                return;
            }

            quizSubmitted = true;
            let correctCount = 0;

            quizData.forEach((question, qIndex) => {
                const questionCard = document.getElementById(`question-${qIndex}`);
                const options = questionCard.querySelectorAll('.option');
                const userAnswer = userAnswers[qIndex];
                const correctAnswer = question.correct;

                options.forEach(opt => opt.classList.add('disabled'));

                options[correctAnswer].classList.add('correct');
                options[correctAnswer].querySelector('i').className = 'bi bi-check-circle-fill me-2';

                if (userAnswer !== correctAnswer) {
                    options[userAnswer].classList.add('incorrect');
                    options[userAnswer].querySelector('i').className = 'bi bi-x-circle-fill me-2';
                    questionCard.classList.add('incorrect');
                } else {
                    correctCount++;
                    questionCard.classList.add('correct');
                }
            });

            const percentage = (correctCount / quizData.length) * 100;
            const resultDiv = document.getElementById('quiz-result');
            resultDiv.style.display = 'block';
            
            let message = '';
            let emoji = '';
            if (percentage === 100) {
                message = '¬°Perfecto! Dominas DAX y compartici√≥n de informes';
                emoji = 'üèÜ';
            } else if (percentage >= 75) {
                message = '¬°Excelente trabajo! Muy buen dominio del tema';
                emoji = 'üåü';
            } else if (percentage >= 60) {
                message = 'Buen intento. Revisa algunos conceptos clave';
                emoji = 'üëç';
            } else {
                message = 'Necesitas repasar DAX y seguridad en Power BI';
                emoji = 'üìö';
            }

            resultDiv.innerHTML = `
                <div class="quiz-score">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">${emoji}</div>
                    <div>Puntaje: ${correctCount} de ${quizData.length} (${percentage.toFixed(0)}%)</div>
                    <div style="font-size: 1.2rem; margin-top: 1rem; opacity: 0.9;">${message}</div>
                </div>
            `;

            document.getElementById('submit-quiz').style.display = 'none';
            document.getElementById('restart-quiz').style.display = 'inline-block';

            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function restartQuiz() {
            renderQuiz();
            document.getElementById('quiz-result').style.display = 'none';
            document.getElementById('submit-quiz').style.display = 'inline-block';
            document.getElementById('restart-quiz').style.display = 'none';
            document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
        }

        document.getElementById('submit-quiz').addEventListener('click', checkAnswers);
        document.getElementById('restart-quiz').addEventListener('click', restartQuiz);

        // ============================================
        // NAVBAR SCROLL EFFECT
        // ============================================
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // ============================================
        // BACK TO TOP BUTTON
        // ============================================
        const backToTopBtn = document.getElementById('backToTop');
        
        window.addEventListener('scroll', function() {
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });

        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // ============================================
        // SMOOTH SCROLL FOR ANCHOR LINKS
        // ============================================
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    const navbarCollapse = document.querySelector('.navbar-collapse');
                    if (navbarCollapse.classList.contains('show')) {
                        navbarCollapse.classList.remove('show');
                    }
                }
            });
        });

        // ============================================
        // FADE IN ANIMATION ON SCROLL
        // ============================================
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.card, .dax-example, .sharing-method, .security-feature').forEach(el => {
            observer.observe(el);
        });

        // ============================================
        // INITIALIZE
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            renderQuiz();
        });
    </script>
</body>
</html>